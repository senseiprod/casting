<!-- Header -->
<header class="topbar d-flex align-items-center justify-content-between">
  <div class="d-flex align-items-center">
    <div class="d-none d-md-flex">
      <h5 class="mb-0 text-primary fw-bold">{{ 'dashboard.overview' | translate }}</h5>
    </div>
  </div>
  
  <!-- Language Selector -->
  <div class="language-selector">
    <div class="dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle language-btn" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-globe me-1"></i>
        <span *ngIf="getCurrentLanguage() === 'en'">English</span>
        <span *ngIf="getCurrentLanguage() === 'fr'">Français</span>
        <span *ngIf="getCurrentLanguage() === 'es'">Español</span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end modern-dropdown" aria-labelledby="languageDropdown">
        <li><a class="dropdown-item" href="#" (click)="changeLanguage('en'); $event.preventDefault()">
          <i class="bi bi-flag me-2"></i>English
        </a></li>
        <li><a class="dropdown-item" href="#" (click)="changeLanguage('fr'); $event.preventDefault()">
          <i class="bi bi-flag me-2"></i>Français
        </a></li>
        <li><a class="dropdown-item" href="#" (click)="changeLanguage('es'); $event.preventDefault()">
          <i class="bi bi-flag me-2"></i>Español
        </a></li>
      </ul>
    </div>
  </div>

  <div class="d-flex align-items-center header-actions">
    <!-- Notifications -->
    <div class="dropdown me-3">
      <a href="#" class="notification-trigger position-relative text-dark" id="notificationsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-bell-fill fs-5"></i>
        <span class="notification-badge">3</span>
      </a>
      <ul class="dropdown-menu dropdown-menu-end modern-dropdown notification-dropdown" aria-labelledby="notificationsDropdown">
        <li><h6 class="dropdown-header">{{ 'common.notifications' | translate }}</h6></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item notification-item" href="#">
          <div class="notification-icon bg-primary">
            <i class="bi bi-cash"></i>
          </div>
          <div class="notification-content">
            <div class="notification-time">April 12, 2023</div>
            <div class="notification-title">{{ 'notifications.newPayment' | translate }}</div>
            <div class="notification-text">$250 from Acme Corp for commercial voiceover</div>
          </div>
        </a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item notification-item" href="#">
          <div class="notification-icon bg-success">
            <i class="bi bi-check2"></i>
          </div>
          <div class="notification-content">
            <div class="notification-time">April 11, 2023</div>
            <div class="notification-title">{{ 'notifications.recordingApproved' | translate }}</div>
            <div class="notification-text">Your voice recording for TechStart Inc. was approved</div>
          </div>
        </a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item notification-item" href="#">
          <div class="notification-icon bg-warning">
            <i class="bi bi-exclamation"></i>
          </div>
          <div class="notification-content">
            <div class="notification-time">April 10, 2023</div>
            <div class="notification-title">{{ 'notifications.newRequest' | translate }}</div>
            <div class="notification-text">EduLearn Platform has sent you a new voice request</div>
          </div>
        </a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item text-center view-all-link" href="#">{{ 'common.viewAll' | translate }}</a></li>
      </ul>
    </div>

    <div class="topbar-divider"></div>

    <!-- Enhanced User Profile Section -->
    <div class="dropdown user-dropdown">
      <a href="#" class="user-profile-trigger d-flex align-items-center text-decoration-none dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <div class="user-profile-container">
          <div class="user-avatar">
            <img [src]="profilePhotoUrl || 'assets/img/images.png'" 
                 alt="Profile Photo" 
                 class="profile-pic">
            <div class="user-status"></div>
          </div>
          <div class="user-info d-none d-lg-block">
            <div class="user-name">{{speaker.nom}}</div>
            <div class="user-role">{{speaker.prenom}}</div>
          </div>
          <i class="bi bi-chevron-down ms-2 dropdown-arrow"></i>
        </div>
      </a>
      <ul class="dropdown-menu dropdown-menu-end modern-dropdown user-dropdown-menu" aria-labelledby="userDropdown">
        <li class="dropdown-header user-dropdown-header">
          <div class="d-flex align-items-center">
            <img [src]="profilePhotoUrl || 'assets/img/images.png'" 
                 alt="Profile Photo" 
                 class="dropdown-profile-pic me-3">
            <div>
              <div class="fw-bold">{{speaker.nom}} {{speaker.prenom}}</div>
              <div class="text-muted small">Voice Artist</div>
            </div>
          </div>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item modern-dropdown-item" routerLink="profile">
          <i class="bi bi-person me-2"></i> {{ 'common.profile' | translate }}
        </a></li>
        <li><a class="dropdown-item modern-dropdown-item" routerLink="setting">
          <i class="bi bi-gear me-2"></i> {{ 'common.settings' | translate }}
        </a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item modern-dropdown-item logout-item" (click)="logout()">
          <i class="bi bi-box-arrow-right me-2"></i> {{ 'common.logout' | translate }}
        </a></li>
      </ul>
    </div>
  </div>
</header>
